main.rb
```ruby
require 'git'
require 'gitlab'

Gitlab.projects.auto_paginate do |repo|
  save_dir = repo['path_with_namespace']
  puts save_dir
  path = File.join('mirrors', save_dir)
  if !File.directory?(path)
    puts 'clone'
    Git.clone(repo['ssh_url_to_repo'], save_dir, path: './mirrors')
    puts 'clone end'
  else
    puts 'fetch'
    Git.open(path).fetch
    puts 'fetch end'
  end
  puts
end
```
run
```bash
gem install git gitlab
mkdir -p ./mirrors
CI_API_V4_URL=https://<gitlab>/api/v4 GITLAB_API_PRIVATE_TOKEN=<TOKEN> ruby main.rb
```